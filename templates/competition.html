{% extends "template.html" %}
{% block content %}
<h2>大会一覧</h2>
<br>
{% if current_user.is_authenticated %}
<a href="{{url_for('competition_edit')}}">新規登録</a>
{% endif %}
<div>
    <table>
        <tr>
            <th>大会</th>
            <th>開催地</th>
        </tr>
        {% for competition in competitions %}
        <tr>
            <td><a href="{{url_for('competition_individual', id=competition.id)}}">{{competition.show_name}}</a></td>
            <td>
                {% if competition.place %}
                {{places[int(competition.place)-1][1]}}
                {% endif %}

            </td>
            <td>
                {% if current_user.is_authenticated %}
                <form method="get" action="{{url_for('competition_edit')}}">
                    <input type="hidden" name="method" value="PUT">
                    <input type="hidden" name="id" value="{{competition.id}}">
                    <input type="submit" value="編集">
                </form>
            </td>
            <td>
                <form method="post" action="{{url_for('competition_confirm')}}">
                    <input type="hidden" name="method" value="DELETE">
                    <input type="hidden" name="id" value="{{competition.id}}">
                    <input type="submit" value="削除">
                </form>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>

</div>
{% endblock %}